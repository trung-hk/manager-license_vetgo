<section class="section">
    <div class="section-body">
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <div class="col-3">
                            <h4>Danh sách config app</h4>
                        </div>
                        <div class="col-9">
                            <button type="button" (click)="showModal()" class="btn btn-success pull-right note-btn">
                                <i class="fas fa-plus"></i> Thêm mới Config
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <nz-table
                                    nzShowSizeChanger
                                    [nzData]="dataList"
                                    [nzFrontPagination]="false"
                                    [nzLoading]="loading"
                                    [nzTotal]="total"
                                    [nzPageSize]="pageSize"
                                    [nzPageIndex]="pageIndex"
                                    (nzQueryParams)="onQueryParamsChange($event)"
                                    (nzPageIndexChange)="onPageIndexChange($event)"
                            >
                                <thead>
                                <tr>
                                    <th nzWidth="30%" nzColumnKey="firebase" [nzSortFn]="true">Thông tin Firebase</th>
                                    <th nzWidth="25%" nzColumnKey="sheet_id" [nzSortFn]="true">Thông tin Sheet Id</th>
                                    <th nzWidth="10%" nzColumnKey="customer_id" [nzSortFn]="true">Khách hàng</th>
                                    <th nzWidth="15%" nzColumnKey="last_modified_date" [nzSortFn]="true">Ngày cập nhật
                                    </th>
                                    <th nzWidth="10%" nzColumnKey="status">Trạng thái</th>
                                    <th nzWidth="10%" nzColumnKey="action">Thao tác</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr *ngFor="let dt of dataList">
                                    <td>{{dt.firebase}}</td>
                                    <td>{{dt.sheetId}}</td>
                                    <td class="align-center">
                                        <nz-avatar nzIcon="user" nzSrc="{{dt.customerId}}"></nz-avatar>
                                    </td>
                                    <td class="align-center">{{dt.lastModifiedDate | date: 'yyyy/MM/dd HH:mm:ss'}}</td>
                                    <td class="align-center">
                                        <div class="badge badge-shadow"
                                             [ngClass]="dt.status === '0' ? 'badge-danger' : 'badge-success'">
                                            {{ dt.status === '0' ? 'Chưa sử dụng' : 'Đang sử dụng' }}
                                        </div>
                                    </td>
                                    <td class="align-center">
                                        <button type="button" class="btn btn-warning note-btn" (click)="showModal(dt)">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        &nbsp;
                                        <button type="button" class="btn btn-danger note-btn" (click)="showDeleteModal(dt.id)">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                                </tbody>
                            </nz-table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Create/Update Form -->
<nz-modal [(nzVisible)]="isVisible"
          [nzTitle]="idShowModal ? modalTitleUpdate : modalTitleAdd"
          [nzContent]="modalContent"
          [nzFooter]="idShowModal ? modalFooterUpdate : modalFooterAdd"
          (nzOnCancel)="handleCancel()" nzWidth="600px">
    <ng-template #modalTitleAdd>Thêm mới Config</ng-template>
    <ng-template #modalTitleUpdate>Cập nhật Config</ng-template>

    <ng-template #modalContent>
        <form nz-form [nzLayout]="'vertical'" [formGroup]="validateForm">
            <input type="hidden" formControlName="id">
            <div class="form-group">
                <div class="row">
                    <label class="col-md-3 col-form-label-sm">Config Firebase</label>
                    <div class="col-md-9">
                        <input type="text" class="form-control" placeholder="Config fireBase"
                               formControlName="firebase">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <label class="col-md-3 col-form-label-sm">Config Sheet Id</label>
                    <div class="col-md-9">
                        <input type="text" class="form-control" placeholder="Sheet Id"
                               formControlName="sheetId">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <label class="col-md-3 col-form-label-sm">Khách hàng</label>
                    <div class="col-md-9">
                        <select class="form-control form-control-sm select-scroll"
                                formControlName="customer">
                        </select>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <label class="col-md-3 col-form-label-sm">Trạng thái</label>
                    <div class="col-md-9">
                        <select class="form-control form-control-sm select-scroll" formControlName="status">
                            <option value="0">Chưa sử dụng</option>
                            <option value="1">Đang sử dụng</option>
                        </select>

                    </div>
                </div>
            </div>
        </form>
    </ng-template>

    <ng-template #modalFooterAdd>
        <button nz-button nzType="default" (click)="handleCancel()">Cancel</button>
        <button nz-button nzType="primary" [disabled]="validateForm.invalid" (click)="handleOk()"
                [nzLoading]="isConfirmLoading"><i class="fas fa-save"></i> Thêm mới
        </button>
    </ng-template>
    <ng-template #modalFooterUpdate>
        <button nz-button nzType="default" (click)="handleCancel()">Cancel</button>
        <button nz-button nzType="primary" [disabled]="validateForm.invalid" (click)="handleOk()"
                [nzLoading]="isConfirmLoading"><i class="fas fa-save"></i> Câp nhật
        </button>
    </ng-template>
</nz-modal>

<!-- Delete Confirmation -->
<nz-modal [(nzVisible)]="isVisibleDelete" nzTitle="Delete Confirmation" nzOkText="Ok" nzOkDanger="true"
          nzCancelText="Cancel" (nzOnOk)="handleConfirmToDelete()"
          (nzOnCancel)="handleCancelDeletePopup()">
    <ng-container *nzModalContent>
        Are you sure you want to delete?
    </ng-container>
</nz-modal>