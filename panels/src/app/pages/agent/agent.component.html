<section class="section">
  <div class="section-body">
    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <div class="col-3">
              <h4>Danh sách Đại lý</h4>
            </div>
            <div class="col-9">
              <button type="button" class="btn btn-success pull-right note-btn" (click)="showModal()">
                <i class="fas fa-plus"></i>&nbsp;<span>Thêm mới đại lý</span>
              </button>
            </div>

          </div>
          <div class="card-body">
            <div class="table-responsive">
              <nz-table [nzScroll]="{x:'1200px'}"
                        nzShowSizeChanger
                        [nzData]="dataList"
                        [nzFrontPagination]="false"
                        [nzLoading]="loading"
                        [nzTotal]="total"
                        [nzPageSize]="pageSize"
                        [nzPageIndex]="pageIndex"
                        (nzQueryParams)="onQueryParamsChange($event)"
                        (nzPageIndexChange)="onPageIndexChange($event)"
              >
                <thead>
                  <tr>
                    <th nzColumnKey="code" [nzSortFn]="true">Mã đại lý</th>
                    <th nzColumnKey="name" [nzSortFn]="true">Tên đại lý</th>
                    <th nzColumnKey="code" >Tên miền web</th>
                    <th nzColumnKey="email" [nzSortFn]="true">E-mail</th>
                    <th nzColumnKey="phone" [nzSortFn]="true">Số điện thoại</th>
                    <th nzColumnKey="address">Địa chỉ</th>
                    <th nzColumnKey="status" [nzSortFn]="true">Trạng thái</th>
                    <th nzWidth="170px" nzColumnKey="last_modified_date" [nzSortFn]="true">Ngày cập nhật</th>
                    <th>Thao tác</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let data of dataList">
<!--                    <td>{{ data.code }}</td>-->
<!--                    <td>{{ data.name }}</td>-->
<!--                    <td><nz-avatar [nzSrc]="data.avatar" [nzText]="transferShortName(data.name)"></nz-avatar></td>-->
<!--                    <td>{{ data.email }}</td>-->
<!--                    <td>{{ data.phone }}</td>-->
<!--                    <td>{{ data.address }}</td>-->
<!--                    <td>{{ data.status }}</td>-->
                    <td>
                      <button type="button" class="btn btn-warning note-btn" (click)="showModal(data)"><i
                          class="fas fa-edit"></i></button>
                      &nbsp;
                      <button type="button" class="btn btn-danger note-btn" (click)="showDeleteModal(data.id)"><i
                          class="fas fa-trash"></i></button>
                    </td>
                  </tr>
                </tbody>
              </nz-table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Create/Update Form -->
<nz-modal [(nzVisible)]="isVisible" [nzTitle]="modalTitle" [nzContent]="modalContent" [nzFooter]="modalFooter"
  (nzOnCancel)="handleCancel()" nzWidth="600px">
  <ng-template #modalTitle>Thêm đại lý</ng-template>

  <ng-template #modalContent>
    <form nz-form [nzLayout]="'vertical'" [formGroup]="validateForm">
      <div class="form-group">
        <div class="row d-none">
          <label class="col-md-2 col-form-label-sm font-bold">id</label>
          <div class="col-md-10">
            <input type="text" class="form-control" formControlName="id" placeholder="ID">
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="row">
          <label class="col-md-2 col-form-label-sm font-bold">Realm</label>
          <div class="col-md-10">
            <input type="text" class="form-control" formControlName="realm" placeholder="Realm">
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="row">
          <label class="col-md-2 col-form-label-sm font-bold">Mã đại lý</label>
          <div class="col-md-10">
            <input type="text" class="form-control" formControlName="code" placeholder="VetGo">
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="row">
          <label class="col-md-2 col-form-label-sm font-bold">Tên Đại lý</label>
          <div class="col-md-10">
            <input type="text" class="form-control" formControlName="name" placeholder="Vet Go">
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="row">
          <label class="col-md-2 col-form-label-sm font-bold">Số điện thoại</label>
          <div class="input-group col-md-10">
            <div class="input-group-prepend">
              <span class="input-group-text font-bold">+84</span>
            </div>
            <input type="tel" class="form-control" placeholder="(090) 123-4567" formControlName="phone">
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="row">
          <label class="col-md-2 col-form-label-sm font-bold">Địa chỉ Email</label>
          <div class="col-md-10">
            <input type="email" class="form-control" placeholder="vetgo@mail.com" formControlName="email">
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="row">
          <label class="col-md-2 col-form-label-sm font-bold">Địa chỉ</label>
          <div class="col-md-10">
            <input type="text" class="form-control" placeholder="Đường số 1 phường x quận x" formControlName="address">
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="row">
          <label class="col-md-2 col-form-label-sm font-bold">Trạng thái</label>
          <div class="col-md-10">
            <select name="status" class="form-control form-control-sm select-scroll" formControlName="status">
              <option value="ACTIVE">Đang hoạt động</option>
              <option value="INACTIVE">Ngưng hoạt động</option>
            </select>
          </div>
        </div>
      </div>
    </form>
  </ng-template>

  <ng-template #modalFooter>
    <button nz-button nzType="default" (click)="handleCancel()">Cancel</button>
    <button nz-button nzType="primary" [disabled]="validateForm.invalid" (click)="handleOk()"
      [nzLoading]="isConfirmLoading"><i class="fas fa-save"></i> Thêm mới</button>
  </ng-template>
</nz-modal>

<!-- Delete Confirmation -->
<nz-modal [(nzVisible)]="isVisibleDelete" nzTitle="Delete Confirmation" nzOkText="Ok" nzOkDanger="true" nzCancelText="Cancel" (nzOnOk)="handleConfirmToDelete()"
  (nzOnCancel)="handleCancelDeletePopup()">
  <ng-container *nzModalContent>
    Are you sure you want to delete?
  </ng-container>
</nz-modal>