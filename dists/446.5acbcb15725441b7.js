"use strict";(self.webpackChunkpanel=self.webpackChunkpanel||[]).push([[446],{3446:(R,l,r)=>{r.r(l),r.d(l,{AuthModule:()=>D});var c=r(6814),m=r(4848),a=r(5057),o=r(5879),p=r(4855),f=r(1397),h=r(834),n=r(6223),g=r(2848),v=r(3599),w=r(2669);function E(e,d){if(1&e){const t=o.EpF();o.TgZ(0,"div",6)(1,"div",7)(2,"h4"),o._uU(3,"Qu\xean m\u1eadt kh\u1ea9u"),o.qZA()(),o.TgZ(4,"div",8)(5,"p",9),o._uU(6,"M\xe3 x\xe1c nh\u1eadn \u0111\u1ed5i m\u1eadt kh\u1ea9u s\u1ebd g\u1eedi qua mail \u0111\xe3 \u0111\u0103ng k\xfd t\xe0i kho\u1ea3n"),o.qZA(),o.TgZ(7,"form",10)(8,"div",11)(9,"label",12),o._uU(10,"T\xe0i kho\u1ea3n \u0111\u0103ng nh\u1eadp"),o.qZA(),o._UZ(11,"input",13),o.qZA(),o.TgZ(12,"div",11)(13,"label",14),o._uU(14,"Nh\u1eadp m\u1eadt kh\u1ea9u m\u1edbi"),o.qZA(),o.TgZ(15,"div",15),o._UZ(16,"input",16),o.TgZ(17,"div",17)(18,"div",18),o.NdJ("click",function(){o.CHM(t);const s=o.oxw();return o.KtG(s.newPasswordVisible=!s.newPasswordVisible)}),o._UZ(19,"i"),o.qZA()()()(),o.TgZ(20,"div",11)(21,"label",19),o._uU(22,"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u m\u1edbi"),o.qZA(),o.TgZ(23,"div",15),o._UZ(24,"input",20),o.TgZ(25,"div",21),o.NdJ("click",function(){o.CHM(t);const s=o.oxw();return o.KtG(s.reNewPasswordVisible=!s.reNewPasswordVisible)}),o.TgZ(26,"div",22),o._UZ(27,"i"),o.qZA()()()(),o.TgZ(28,"div",11)(29,"button",23),o.NdJ("click",function(){o.CHM(t);const s=o.oxw();return o.KtG(s.sendCodeConfirm(!1))}),o._uU(30," \u0110\u1ed5i m\xe2t kh\u1ea9u "),o.qZA()()()()()}if(2&e){const t=o.oxw();o.xp6(7),o.Q6J("formGroup",t.validateForgotPasswordForm),o.xp6(9),o.Q6J("type",t.newPasswordVisible?"text":"password"),o.xp6(3),o.Tol(t.newPasswordVisible?"fas fa-eye-slash":"fas fa-eye"),o.xp6(5),o.Q6J("type",t.reNewPasswordVisible?"text":"password"),o.xp6(3),o.Tol(t.reNewPasswordVisible?"fas fa-eye-slash":"fas fa-eye"),o.xp6(2),o.Q6J("disabled",t.validateForgotPasswordForm.invalid)}}function A(e,d){if(1&e){const t=o.EpF();o.TgZ(0,"a",28),o.NdJ("click",function(){o.CHM(t);const s=o.oxw(2);return o.KtG(s.sendCodeConfirm(!0))}),o._uU(1," G\u1eedi l\u1ea1i m\xe3 x\xe1c nh\u1eadn "),o.qZA()}}function P(e,d){if(1&e&&(o.TgZ(0,"p"),o._uU(1),o.qZA()),2&e){const t=o.oxw(2);o.xp6(1),o.hij(" G\u1eedi l\u1ea1i m\xe3 x\xe1c nh\u1eadn sau ",t.countDownResendCode," gi\xe2y ")}}function C(e,d){if(1&e){const t=o.EpF();o.TgZ(0,"div",6)(1,"div",7)(2,"h4"),o._uU(3,"Nh\u1eadp m\xe3 x\xe1c nh\u1eadn"),o.qZA()(),o.TgZ(4,"div",8)(5,"p",9),o._uU(6,"Vui l\xf2ng nh\u1eadp m\xe3 x\xe1c nh\u1eadn \u0111\u1ec3 ho\xe0n th\xe0nh \u0111\u1ed5i m\u1eadt kh\u1ea9u"),o.qZA(),o.TgZ(7,"form",10)(8,"div",11)(9,"label",24),o._uU(10,"M\xe3 x\xe1c nh\u1eadn"),o.qZA(),o._UZ(11,"input",25),o.qZA(),o.TgZ(12,"div",11)(13,"button",23),o.NdJ("click",function(){o.CHM(t);const s=o.oxw();return o.KtG(s.confirmResetPassword())}),o._uU(14," X\xe1c nh\u1eadn "),o.qZA()(),o.TgZ(15,"div",11),o.YNc(16,A,2,0,"a",26),o.YNc(17,P,2,1,"p",27),o.qZA()()()()}if(2&e){const t=o.oxw();o.xp6(7),o.Q6J("formGroup",t.validateConfirmResetPasswordForm),o.xp6(6),o.Q6J("disabled",t.validateConfirmResetPasswordForm.invalid),o.xp6(3),o.Q6J("ngIf",t.isResendCodeConfirm),o.xp6(1),o.Q6J("ngIf",!t.isResendCodeConfirm)}}let F=(()=>{class e{constructor(t,i,s,u,N){this.loadScript=t,this.api=i,this.scriptFC=s,this.fb=u,this.dataService=N,this.STATUS_FORGOT_PASSWORD=a.wc,this.realm=(0,a.eH)(),this.newPasswordVisible=!1,this.reNewPasswordVisible=!1,this.statusForgotPassword=a.wc.INPUT_INFO,this.loading=!1,this.isResendCodeConfirm=!0,this.countDownResendCode=60}ngOnInit(){this.validateForgotPasswordForm=this.fb.group(m.lV),this.validateConfirmResetPasswordForm=this.fb.group(m.EQ),this.loadScript.addListScript([]).then(),this.validateForgotPasswordForm.patchValue({realm:this.realm})}sendCodeConfirm(t){if(this.loading=!0,this.validateForgotPasswordForm.invalid)return Object.values(this.validateForgotPasswordForm.controls).forEach(s=>{s.invalid&&(s.markAsDirty(),s.updateValueAndValidity({onlySelf:!0}))}),void(this.loading=!1);const i=this.validateForgotPasswordForm.getRawValue();console.log(i),this.api.resetPassword(i).subscribe(s=>{if(this.scriptFC.validateResponseAPI(s.status))this.scriptFC.alertShowMessageError(s.message);else if(this.statusForgotPassword=a.wc.INPUT_PIN_CODE,this.validateConfirmResetPasswordForm.patchValue({realm:i.realm,userName:i.userName}),t){this.isResendCodeConfirm=!1;const u=setInterval(()=>{0==this.countDownResendCode--&&(this.isResendCodeConfirm=!0,this.countDownResendCode=60,clearInterval(u))},1e3)}this.loading=!1,console.log(s)})}awaitReSendPinCode(){const t=setInterval(function(i,s){0==i--&&clearInterval(t)},1e3)}confirmResetPassword(){if(this.loading=!0,this.validateConfirmResetPasswordForm.invalid)return Object.values(this.validateConfirmResetPasswordForm.controls).forEach(i=>{i.invalid&&(i.markAsDirty(),i.updateValueAndValidity({onlySelf:!0}))}),void(this.loading=!1);const t=this.validateConfirmResetPasswordForm.getRawValue();console.log(t),this.api.confirmResetPassword(t).subscribe(i=>{this.scriptFC.validateResponseAPI(i.status)?(this.scriptFC.alertShowMessageError(i.message),this.loading=!1):(this.statusForgotPassword=a.wc.FINISH,window.location.href=window.location.origin),console.log(i)})}static#o=this.\u0275fac=function(i){return new(i||e)(o.Y36(p.A),o.Y36(f.U),o.Y36(h.n),o.Y36(n.QS),o.Y36(g.D))};static#t=this.\u0275cmp=o.Xpm({type:e,selectors:[["app-forgot-password"]],decls:7,vars:3,consts:[[1,"section"],[1,"container","mt-5"],[1,"row"],[1,"col-12","col-sm-12","col-md-9","offset-md-2","col-lg-8","offset-lg-2","col-xl-6","offset-xl-3"],["nzTip","\u0110ang x\u1eed l\xfd...",3,"nzSpinning"],["class","card card-primary",4,"ngIf"],[1,"card","card-primary"],[1,"card-header"],[1,"card-body"],[1,"text-muted"],["nz-form","","method","POST",3,"formGroup"],[1,"form-group"],["for","user-login"],["id","user-login","type","text","formControlName","userName","tabindex","1","required","","autofocus","",1,"form-control"],["for","new-password"],[1,"input-group"],["id","new-password","formControlName","newPassword",1,"form-control",3,"type"],[1,"input-group-prepend"],[1,"input-group-text",2,"cursor","pointer",3,"click"],["for","re-new-password"],["id","re-new-password","formControlName","reNewPassword",1,"form-control",3,"type"],[1,"input-group-prepend",3,"click"],[1,"input-group-text",2,"cursor","pointer"],["type","button",1,"btn","btn-primary","btn-lg","btn-block",3,"disabled","click"],["for","confirm-code"],["id","confirm-code","type","text","formControlName","pinCode","tabindex","1","required","","autofocus","",1,"form-control"],["href","javascript:void(0)",3,"click",4,"ngIf"],[4,"ngIf"],["href","javascript:void(0)",3,"click"]],template:function(i,s){1&i&&(o.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"nz-spin",4),o.YNc(5,E,31,8,"div",5),o.YNc(6,C,18,4,"div",5),o.qZA()()()()()),2&i&&(o.xp6(4),o.Q6J("nzSpinning",s.loading),o.xp6(1),o.Q6J("ngIf",s.statusForgotPassword==s.STATUS_FORGOT_PASSWORD.INPUT_INFO),o.xp6(1),o.Q6J("ngIf",s.statusForgotPassword==s.STATUS_FORGOT_PASSWORD.INPUT_PIN_CODE))},dependencies:[c.O5,n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.sg,n.u,v.Lr,w.W],styles:[".section[_ngcontent-%COMP%]{position:absolute;width:100%;top:15%}"]})}return e})();var T=r(2787),x=r(6758),_=r(752);const Z=[{path:x.P.PAGE_FORGOT_PASSWORD,component:F}];let D=(()=>{class e{static#o=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=o.oAB({type:e});static#s=this.\u0275inj=o.cJS({imports:[c.ez,T.Bz.forChild(Z),n.u5,n.UX,_.b]})}return e})()}}]);